{"head":{"title":"Serverless Framework - AWS Lambda Events - S3","menuText":"S3","menuOrder":3,"description":"Setting up AWS S3 Events with AWS Lambda via the Serverless Framework","layout":"Page"},"body":"<!-- DOCS-SITE-LINK:START automatically generated  -->\n### [Read this on the main serverless docs site](https://www.serverless.com/framework/docs/providers/aws/events/s3)\n<!-- DOCS-SITE-LINK:END -->\n<h1 id=\"s3\"><a href=\"#s3\" class=\"phenomic-HeadingAnchor\">#</a>S3</h1>\n<h2 id=\"simple-event-definition\"><a href=\"#simple-event-definition\" class=\"phenomic-HeadingAnchor\">#</a>Simple event definition</h2>\n<p>This will create a <code>photos</code> bucket which fires the <code>resize</code> function when an object is added or modified inside the bucket. A hardcoded bucket name can lead to issues as a bucket name can only be used once in S3. For that you can use the <a href=\"../../../01-guide/08-serverless-variables.md\">Serverless Variable syntax</a> and add dynamic elements to the bucket name.</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">functions:</span>\n<span class=\"hljs-attr\">  resize:</span>\n<span class=\"hljs-attr\">    handler:</span> resize.handler\n<span class=\"hljs-attr\">    events:</span>\n<span class=\"hljs-attr\">      - s3:</span> photos</code></pre>\n<h2 id=\"setting-the-specific-trigger-event\"><a href=\"#setting-the-specific-trigger-event\" class=\"phenomic-HeadingAnchor\">#</a>Setting the specific trigger event</h2>\n<p>This will create a bucket <code>photos</code>. The <code>users</code> function is called whenever an object is removed from the bucket. Check out the <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html#notification-how-to-event-types-and-destinations\">AWS documentation</a> to learn more about all the different event types that can be configured.</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">functions:</span>\n<span class=\"hljs-attr\">  users:</span>\n<span class=\"hljs-attr\">    handler:</span> users.handler\n<span class=\"hljs-attr\">    events:</span>\n<span class=\"hljs-attr\">      - s3:</span>\n<span class=\"hljs-attr\">          bucket:</span> photos\n<span class=\"hljs-attr\">          event:</span> s3:ObjectRemoved:*</code></pre>\n<h2 id=\"setting-filter-rules\"><a href=\"#setting-filter-rules\" class=\"phenomic-HeadingAnchor\">#</a>Setting filter rules</h2>\n<p>This will create a bucket <code>photos</code>. The <code>users</code> function is called whenever an image with <code>.jpg</code> extension is uploaded to folder <code>uploads</code> in the bucket. Check out the <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html#notification-how-to-filtering\">AWS documentation</a> to learn more about all the different filter types that can be configured.</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">functions:</span>\n<span class=\"hljs-attr\">  users:</span>\n<span class=\"hljs-attr\">    handler:</span> users.handler\n<span class=\"hljs-attr\">    events:</span>\n<span class=\"hljs-attr\">      - s3:</span>\n<span class=\"hljs-attr\">          bucket:</span> photos\n<span class=\"hljs-attr\">          event:</span> s3:ObjectCreated:*\n<span class=\"hljs-attr\">          rules:</span>\n<span class=\"hljs-attr\">            - prefix:</span> uploads/\n<span class=\"hljs-attr\">            - suffix:</span> .jpg</code></pre>\n<h2 id=\"triggering-separate-functions-from-the-same-bucket\"><a href=\"#triggering-separate-functions-from-the-same-bucket\" class=\"phenomic-HeadingAnchor\">#</a>Triggering separate functions from the same bucket</h2>\n<p>You're able to repeat the S3 event configuration in the same or separate functions so one bucket can call these functions. One caveat though is that you can't repeat the same configuration in both functions, e.g. the event type has to be different.</p>\n<p>The following example will work:</p>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">functions:</span>\n<span class=\"hljs-attr\">  users:</span>\n<span class=\"hljs-attr\">    handler:</span> users.handler\n<span class=\"hljs-attr\">    events:</span>\n<span class=\"hljs-attr\">      - s3:</span>\n<span class=\"hljs-attr\">          bucket:</span> photos\n<span class=\"hljs-attr\">          event:</span> s3:ObjectCreated:*\n<span class=\"hljs-attr\">      - s3:</span>\n<span class=\"hljs-attr\">          bucket:</span> photos\n<span class=\"hljs-attr\">          event:</span> s3:ObjectRemoved:*</code></pre>\n","__filename":"providers\\aws\\events\\s3.md","__url":"/providers/aws/events/s3/","__resourceUrl":"/providers/aws/events/s3/index.html","__dataUrl":"/providers/aws/events/s3/index.html.dd942664e184888af89dea21240b14da.json"}