{"head":{"title":"Serverless Framework - AWS Lambda Guide - Services","menuText":"Services","menuOrder":4,"description":"How to manage and configure serverless services, which contain your AWS Lambda functions, their events and infrastructure resources.","layout":"Page"},"body":"<!-- DOCS-SITE-LINK:START automatically generated  -->\n### [Read this on the main serverless docs site](https://www.serverless.com/framework/docs/providers/aws/guide/services)\n<!-- DOCS-SITE-LINK:END -->\n<h1 id=\"services\"><a href=\"#services\" class=\"phenomic-HeadingAnchor\">#</a>Services</h1>\n<p>A <em>Service</em> is like a Project.  It's where you define your AWS Lambda Functions, the Events that trigger them and any AWS infrastructure Resources they require, all in a file called <code>serverless.yml</code>.</p>\n<p>To get started building your first Serverless Framework project, create a <em>Service</em>.</p>\n<h2 id=\"organization\"><a href=\"#organization\" class=\"phenomic-HeadingAnchor\">#</a>Organization</h2>\n<p>In the beginning of an application, many people use a single Service to define all of the Functions, Events and Resources for that project.  This is what we recommend in the beginning.</p>\n<pre><code class=\"hljs language-bash\">myApp/\n  serverless.yml  <span class=\"hljs-comment\"># Contains all functions and infrastructure resources</span></code></pre>\n<p>However, as your application grows, you can break it out into multiple services.  A lot of people organize their services by workflows or data models, and group the functions related to those workflows and data models together in the service.</p>\n<pre><code class=\"hljs language-bash\">users/\n  serverless.yml  <span class=\"hljs-comment\"># Contains 4 functions that do Users CRUD operations and the Users database</span>\nposts/\n  serverless.yml <span class=\"hljs-comment\"># Contains 4 functions that do Posts CRUD operations and the Posts database</span>\ncomments/\n  serverless.yml <span class=\"hljs-comment\"># Contains 4 functions that do Comments CRUD operations and the Comments database</span></code></pre>\n<p>This makes sense since related functions usually use common infrastructure resources, and you want to keep those functions and resources together as a single unit of deployment, for better organization and separation of concerns.</p>\n<p><strong>Note:</strong> Currently, every service will create a separate REST API on AWS API Gateway.  Due to a limitation with AWS API Gateway, you can only have a custom domain per one REST API.  If you plan on making a large REST API, please make note of this limitation.  Also, a fix is in the works and is a top priority.</p>\n<h2 id=\"creation\"><a href=\"#creation\" class=\"phenomic-HeadingAnchor\">#</a>Creation</h2>\n<p>To create a service, use the <code>create</code> command. You must also pass in a runtime (e.g., node.js, python etc.) you would like to write the service in.  You can also pass in a path to create a directory and auto-name your service:</p>\n<pre><code class=\"hljs language-bash\">serverless create --template aws-nodejs --path myService</code></pre>\n<p>Here are the available runtimes for AWS Lambda:</p>\n<ul>\n<li>aws-nodejs</li>\n<li>aws-python</li>\n<li>aws-java-gradle</li>\n<li>aws-java-maven</li>\n<li>aws-scala-sbt</li>\n</ul>\n<p>Check out the <a href=\"../../cli-reference/create\">create command docs</a> for all the details and options.</p>\n<h2 id=\"contents\"><a href=\"#contents\" class=\"phenomic-HeadingAnchor\">#</a>Contents</h2>\n<p>You'll see the following files in your working directory:</p>\n<ul>\n<li><code>serverless.yml</code></li>\n<li><code>handler.js</code></li>\n<li><code>event.json</code></li>\n</ul>\n<h3 id=\"serverlessyml\"><a href=\"#serverlessyml\" class=\"phenomic-HeadingAnchor\">#</a>serverless.yml</h3>\n<p>Each <em>Serverless service</em> configuration is managed in the <code>serverless.yml</code> file. The main responsibilities of this file are:</p>\n<ul>\n<li>Declare a Serverless service</li>\n<li>Define one or multiple functions in the service</li>\n<li>Define the provider the service will be deployed to (and the runtime if provided)</li>\n<li>Define custom plugins to be used</li>\n<li>Define events that trigger each function to execute (e.g. HTTP requests)</li>\n<li>Define a set of resources (e.g. 1 AWS CloudFormation stack) required by the functions in this service</li>\n<li>Allow events listed in the <code>events</code> section to automatically create the resources required for the event upon deployment</li>\n<li>Allow flexible configuration using Serverless Variables</li>\n</ul>\n<p>You can see the name of the service, the provider configuration and the first function inside the <code>functions</code> definition which points to the <code>handler.js</code> file. Any further service configuration will be done in this file.</p>\n<pre><code class=\"hljs language-yml\"><span class=\"hljs-comment\"># serverless.yml</span>\n\n<span class=\"hljs-attr\">service:</span> users\n\n<span class=\"hljs-attr\">provider:</span>\n<span class=\"hljs-attr\">  name:</span> aws\n<span class=\"hljs-attr\">  runtime:</span> nodejs4<span class=\"hljs-number\">.3</span>\n<span class=\"hljs-attr\">  memorySize:</span> <span class=\"hljs-number\">512</span>\n\n<span class=\"hljs-attr\">functions:</span>\n<span class=\"hljs-attr\">  usersCreate:</span> <span class=\"hljs-comment\"># A Function</span>\n<span class=\"hljs-attr\">    events:</span> <span class=\"hljs-comment\"># The Events that trigger this Function</span>\n<span class=\"hljs-attr\">      - http:</span> post users/create\n<span class=\"hljs-attr\">  usersDelete:</span> <span class=\"hljs-comment\"># A Function</span>\n<span class=\"hljs-attr\">    events:</span>  <span class=\"hljs-comment\"># The Events that trigger this Function</span>\n<span class=\"hljs-attr\">      - http:</span> delete users/delete\n\n<span class=\"hljs-comment\"># The \"Resources\" your \"Functions\" use.  Raw AWS CloudFormation goes in here.</span>\n<span class=\"hljs-attr\">resources:</span>\n<span class=\"hljs-attr\">  Resources:</span>\n<span class=\"hljs-attr\">    usersTable:</span>\n<span class=\"hljs-attr\">      Type:</span> AWS::DynamoDB::Table\n<span class=\"hljs-attr\">      Properties:</span>\n<span class=\"hljs-attr\">        TableName:</span> usersTable\n<span class=\"hljs-attr\">        AttributeDefinitions:</span>\n<span class=\"hljs-attr\">          - AttributeName:</span> email\n<span class=\"hljs-attr\">            AttributeType:</span> S\n<span class=\"hljs-attr\">        KeySchema:</span>\n<span class=\"hljs-attr\">          - AttributeName:</span> email\n<span class=\"hljs-attr\">            KeyType:</span> HASH\n<span class=\"hljs-attr\">        ProvisionedThroughput:</span>\n<span class=\"hljs-attr\">          ReadCapacityUnits:</span> <span class=\"hljs-number\">1</span>\n<span class=\"hljs-attr\">          WriteCapacityUnits:</span> <span class=\"hljs-number\">1</span></code></pre>\n<p>Every <code>serverless.yml</code> translates to a single AWS CloudFormation template and a CloudFormation stack is created from that resulting CloudFormation template.</p>\n<h3 id=\"handlerjs\"><a href=\"#handlerjs\" class=\"phenomic-HeadingAnchor\">#</a>handler.js</h3>\n<p>The <code>handler.js</code> file contains your function code. The function definition in <code>serverless.yml</code> will point to this <code>handler.js</code> file and the function exported here.</p>\n<h3 id=\"eventjson\"><a href=\"#eventjson\" class=\"phenomic-HeadingAnchor\">#</a>event.json</h3>\n<p>This file contains event data you can use to invoke your function with via <code>serverless invoke -p event.json</code></p>\n<h2 id=\"deployment\"><a href=\"#deployment\" class=\"phenomic-HeadingAnchor\">#</a>Deployment</h2>\n<p>When you deploy a Service, all of the Functions, Events and Resources in your <code>serverless.yml</code> are translated to an AWS CloudFormation template and deployed as a single CloudFormation stack.</p>\n<p>To deploy a service, use the <code>deploy</code> command:</p>\n<pre><code class=\"hljs language-bash\">serverless deploy</code></pre>\n<p>Deployment defaults to <code>dev</code> stage and <code>us-east-1</code> region on AWS, unless you specified these elsewhere, or add them in as options:</p>\n<pre><code class=\"hljs language-bash\">serverless deploy --stage prod --region us-east-1</code></pre>\n<p>Check out the <a href=\"https://serverless.com/framework/docs/providers/aws/guide/deploying/\">deployment guide</a> to learn more about deployments and how they work.  Or, check out the <a href=\"../cli-reference/deploy\">deploy command docs</a> for all the details and options.</p>\n<h2 id=\"removal\"><a href=\"#removal\" class=\"phenomic-HeadingAnchor\">#</a>Removal</h2>\n<p>To easily remove your Service from your AWS account, you can use the <code>remove</code> command.</p>\n<p>Run <code>serverless remove -v</code> to trigger the removal process. As in the deploy step we're also running in the <code>verbose</code> mode so you can see all details of the remove process.</p>\n<p>Serverless will start the removal and informs you about it's process on the console. A success message is printed once the whole service is removed.</p>\n<p>The removal process will only remove the service on your provider's infrastructure. The service directory will still remain on your local machine so you can still modify and (re)deploy it to another stage, region or provider later on.</p>\n","__filename":"providers\\aws\\guide\\services.md","__url":"/providers/aws/guide/services/","__resourceUrl":"/providers/aws/guide/services/index.html","__dataUrl":"/providers/aws/guide/services/index.html.226a528c5cbefa71116f32e9605e4eb9.json"}